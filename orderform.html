<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Order Form - Bon Jour Pinoy Restaurant</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
  
  <link rel="stylesheet" href="orderformstyle.css"> 
</head>
<body>
  <header>
    <h1><a href="homepage.html" style="text-decoration: none; color: inherit;"><b style="animation: glowing 1s infinite;">BON JOUR PINOY RESTAURANT™</b></a></h1>
    <nav>
      <div class="nav-container">
        <ul class="nav-list">
          <li><a href="homepage.html">Home</a></li>
          <li><a href="aboutus.html">About Us</a></li>
          <li><a href="homepage.html#menu">Food Menu</a></li> 
          <li><a href="orderform.html" onclick="checkCartAndRedirect()">Order Form</a></li> 

          <li><a href="index.html">Sign Out</a></li>
        </ul>
        <div class="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <section id="order-form"> 
      <h2>Order Form</h2>
      <form id="orderForm" action="#" method="post"> 
        <div class="form-group">
          <label for="name">Full Name:</label>
          <input type="text" id="name" name="name" required aria-required="true">
        </div>

        <div class="form-group">
          <label for="email">Email Address:</label>
          <input type="email" id="email" name="email" required aria-required="true">
        </div>

        <div class="form-group">
          <label for="phone">Phone Number:</label>
          <input type="tel" id="phone" name="phone" required aria-required="true">
        </div>

        <div class="form-group">
          <label for="address">Delivery Address:</label>
          <textarea id="address" name="address" rows="4" required aria-required="true"></textarea>
        </div>

        <div class="form-group">
          <label for="order">Order Details:</label> 
       
          <textarea id="order" name="order" rows="6" placeholder="All your order goes here." required aria-required="true" readonly></textarea> </div>

        <div class="form-group">
          <label for="payment">Payment Method:</label>
          <select id="payment" name="payment">
            <option value="gcash">GCash</option>
            <option value="paymaya">PayMaya</option>
            <option value="cod">Cash on Delivery</option>
          </select>
        </div>

        <div id="order-summary">
          <h3>Order Summary</h3>
          <ul id="order-summary-items"></ul>
          <p>Total: <span id="order-summary-total">₱0</span></p>
        </div>

        <button type="submit">Place Order</button>
      </form>
    </section>
  </main>

  <footer>
    <p>&copy; 2024 Bon Jour Pinoy Restaurant. All rights reserved.</p>
  </footer>

  <script>
    // JavaScript for hamburger menu
    const hamburger = document.querySelector('.hamburger');
    const navList = document.querySelector('.nav-list');

    hamburger.addEventListener('click', () => {
      navList.classList.toggle('active');
      hamburger.classList.toggle('active'); 
    });

      // Get cart data from local storage and populate the order textarea
    const orderTextarea = document.getElementById('order');
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function updateOrderSummary() {
      let orderText = "";
      let total = 0;
      const orderSummaryItems = document.getElementById('order-summary-items');
      const orderSummaryTotal = document.getElementById('order-summary-total');
      orderSummaryItems.innerHTML = ''; // Clear the order summary

      cart.forEach((item, index) => {
        orderText += `${item.name} - ${item.price}\n`; 
        total += parseFloat(item.price.replace('₱', '')); 

        // Add item to order summary with remove button
        let li = document.createElement('li');
        li.innerHTML = `${item.name} - ${item.price} <button class="remove-item" data-index="${index}">x</button>`;
        orderSummaryItems.appendChild(li);
      });

      orderTextarea.value = orderText;
      orderSummaryTotal.textContent = '₱' + total.toFixed(2); 

      // Add event listeners to remove buttons
      const removeButtons = document.querySelectorAll('.remove-item');
      removeButtons.forEach(button => {
        button.addEventListener('click', () => {
          const indexToRemove = button.dataset.index;
          cart.splice(indexToRemove, 1);
          localStorage.setItem('cart', JSON.stringify(cart));
          updateOrderSummary();
        });
      });
    }

    if (cart.length > 0) {
      updateOrderSummary();
    }
    
    function checkCartAndRedirect() {
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  if (cart.length > 0) {
    window.location.href = 'orderform.html'; 
  } else {
    showCustomAlert("Your cart is empty. Please add items to your order first.", 'warning');
  }
}

function showCustomAlert(message, type) {
  // ... (code for creating and displaying the custom alert) ...
}

    src="https://code.jquery.com/jquery-3.4.1.js"
 // Function to save form data to localStorage
function saveFormData() {
  const formData = {
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    phone: document.getElementById('phone').value,
    address: document.getElementById('address').value,
    order: document.getElementById('order').value,
    payment: document.getElementById('payment').value,
  };
  localStorage.setItem('orderFormData', JSON.stringify(formData));
}

// Function to load form data from localStorage
function loadFormData() {
  const savedData = JSON.parse(localStorage.getItem('orderFormData'));
  if (savedData) {
    document.getElementById('name').value = savedData.name || '';
    document.getElementById('email').value = savedData.email || '';
    document.getElementById('phone').value = savedData.phone || '';
    document.getElementById('address').value = savedData.address || '';
    document.getElementById('order').value = savedData.order || '';
    document.getElementById('payment').value = savedData.payment || 'gcash'; // Default payment option
  }
}

// Event listeners for form fields
document.getElementById('orderForm').addEventListener('input', saveFormData);
document.addEventListener('DOMContentLoaded', loadFormData);  

// Function to validate the email before form submission
function validateEmail(event) {
  const orderEmail = document.getElementById('email').value;
  const signedInEmail = localStorage.getItem('userEmail');

  if (orderEmail !== signedInEmail) {
    event.preventDefault(); // Prevent form submission
    alert("Email addresses do not match. Please enter the email you used to sign in."); // Custom alert
  }
}

// Attach the validateEmail function to the form submission
document.getElementById('orderForm').addEventListener('submit', validateEmail); 

  // Existing JavaScript code for the hamburger menu, cart, and form data...

  // Function to validate the email before form submission
  function validateEmail(event) {
    const orderEmail = document.getElementById('email').value;
    const signedInEmail = localStorage.getItem('userEmail');

    if (orderEmail !== signedInEmail) {
      event.preventDefault(); // Prevent form submission
      alert("Email addresses do not match. Please enter the email you used to sign in."); // Custom alert
    }
  }

  // Attach the validateEmail function to the form submission
  document.getElementById('orderForm').addEventListener('submit', validateEmail);

  // Load the form data from localStorage when the page is loaded
  document.addEventListener('DOMContentLoaded', loadFormData);

  </script>
</body>
</html>
